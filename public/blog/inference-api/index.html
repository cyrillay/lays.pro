<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="
		Introduction I built a simple inference API backed by the famous pretrained CNN model ResNet50. The network is 50 layers deep and can classify images into 1000 object categories, such as keyboard, mouse, pencil, and many animals. Currently, the API is running on the same machine hosting this website : a simple t2.micro on AWS EC2. It is available at http://datascience.lays.pro.
UI   Architecture   Command line usage Download an image, and submit it with :    
		"> 
    
	<meta name="author" content=" Blog ">  
    <base href="http://www.lays.pro/">
    <title>Building an image classification inference API in 30 minutes with deep learning</title>

    
    <link href="css/bootstrap.min.css" rel="stylesheet">

    
    <link href="css/landing-page.css" rel="stylesheet">

    
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    
    <link href="css/bootstrap-social.css" rel="stylesheet">

    
    
    

    <style>
    .navbar {
    border-color: #e7e7e7;
}

.content-section-a,
footer,
.navbar {
  background-color: #f8f8f8;
  color: #333;
}

.navbar a:link,
.navbar-default .navbar-nav>li>a {
  color: #777;
}

.navbar a:hover,
.navbar-default .navbar-nav>li>a:hover {
  color: rgb(51, 51, 51);
}

.content-section-b {
  background-color: white;
  color: #333;
}

body {
  color: rgb(51, 51, 51);
}

.header-container h1,
.header-container h2,
.header-container h3,
.header-container h4 {
  color: rgb(51, 51, 51);
}
 
  </style>

</head>
<body>


<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        
        <div class="navbar-header page-scroll" style="margin-left: -15px;">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" style="margin-right: 0px;">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
				<span class="icon-bar"></span>
            </button>
            <a class="navbar-brand page-scroll" style="padding-left: 0px;margin-left: 0px;" href="#intro">
            Cyril Lay</a>
        </div>
        
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
				
				<li>
				  <a class="page-scroll" href="">
                    Github
                  </a>
                </li>
				 
				
				<li>
					<a class="page-scroll" href="/blog/blog-summary">
                    Blog
					</a>
                </li>
				 
            </ul>
        </div>
        
    </div>
    
</nav>


<section id="services">
   <div class="content-section-a">

      <div class="container">

        <div class="row">
          <div>
            <hr class="section-heading-spacer">
            <div class="clearfix"></div>
            <h2 class="section-heading">Building an image classification inference API in 30 minutes with deep learning</h2>
            <h2 id="introduction">Introduction</h2>
<p>I built a simple inference API backed by the famous pretrained CNN model <a href="https://www.mathworks.com/help/deeplearning/ref/resnet50.html">ResNet50</a>. The network is 50 layers deep and can classify images into 1000 object categories, such as keyboard, mouse, pencil, and many animals.
Currently, the API is running on the same machine hosting this website : a simple t2.micro on AWS EC2. It is available at <a href="http://datascience.lays.pro">http://datascience.lays.pro</a>.</p>
<h2 id="ui">UI</h2>
<figure>
    <img src="/images/inference-api-screenshot.png" width="100%"/> 
</figure>

<h2 id="architecture">Architecture</h2>
<figure>
    <img src="/images/architecture.png" width="100%"/> 
</figure>

<h2 id="command-line-usage">Command line usage</h2>
<p>Download an image, and submit it with :</p>
<p><code>$ curl -X POST -F image=@IMAGE_NAME.jpg 'http://lays.pro:5000/predict'</code></p>
<p>You should receive a JSON response with the following structure :</p>
<pre><code>{
	&quot;predictions&quot;:[
		{&quot;label&quot;:&quot;Indian_elephant&quot;,&quot;probability&quot;:0.7532103657722473},
		{&quot;label&quot;:&quot;tusker&quot;,&quot;probability&quot;:0.12444225698709488},
		{&quot;label&quot;:&quot;African_elephant&quot;,&quot;probability&quot;:0.12229373306035995},
		{&quot;label&quot;:&quot;water_buffalo&quot;,&quot;probability&quot;:2.685574690985959e-05},
		{&quot;label&quot;:&quot;Chesapeake_Bay_retriever&quot;,&quot;probability&quot;:7.5970979196426924e-06}
	],
	&quot;success&quot;:true
}
</code></pre><p>This means that the image you sent was classified as an Indian Elephant by ResNet50, with a probability score of 75%.</p>
<p>The short, full code of the back-end is available <a href="https://github.com/cyrillay/inference-api-backend/blob/master/run_keras_server.py">here</a>.</p>
<h2 id="roadmap">Roadmap</h2>
<ul>
<li>New endpoints for different models : threat classification, edge detection&hellip;</li>
<li>Dockerize the app and automate the deployment of new models</li>
</ul>
<h2 id="updates">Updates</h2>
<ul>
<li>13/07/19 : Swapped Resnet50 with Inception V3</li>
<li>09/07/19 : Added CI/CD for the front-end</li>
</ul>

        </div>
    </div>

</div>
</div>

</section>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-8" style="padding-left: 0px; width:100%">
				<ul class="list-inline">
					<li>
						<a class="page-scroll" href="#intro">Up</a>
					</li>
					<li class="footer-menu-divider">&sdot;</li>
						<li>
							<a href="http://www.lays.pro/imprint-gdpr/imprint" >Imprint</a>
						</li>
					<li class="footer-menu-divider">&sdot;</li>
						<li>
							<a href="http://www.lays.pro/imprint-gdpr/gdpr" >GDPR</a>
						</li>
				 </ul>
				 <p class="copyright text-muted small" style="text-align:left;">
                    Copyright &copy; Cyril Lay All Rights Reserved 
                        </br>Built with <a href="http://gohugo.io">Hugo</a> and the <a href="https://github.com/cdeck3r/OneDly-Theme">OneDly project</a> theme.
                 </p>
			</div>
            
        </div>
    </div>
</footer>

<script src="js/jquery-1.11.0.js"></script>


<script src="js/jquery.easing.min.js"></script>


<script src="js/bootstrap.min.js"></script>



</body>
</html>

